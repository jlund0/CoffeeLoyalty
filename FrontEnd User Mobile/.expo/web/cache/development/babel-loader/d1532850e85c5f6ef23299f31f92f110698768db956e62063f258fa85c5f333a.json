{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport * as React from \"react\";\nimport { NavigationContainer, useIsFocused } from \"@react-navigation/native\";\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\nimport { app } from \"./firebase.js\";\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport Home from \"./screens/Home\";\nimport CardScreen from \"./screens/Card\";\nimport StoresScreen from \"./screens/Shops\";\nimport SettingsScreen from \"./screens/Settings\";\nimport SignInScreen from \"./screens/SignIn\";\nimport SignUpScreen from \"./screens/SignUp\";\nimport LoyaltyCard from \"./screens/loyaltyCard\";\nimport { getUserInfo, getUserCards } from \"./firebasefunctions\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar Stack = createNativeStackNavigator();\nvar auth = getAuth(app);\nfunction SplashScreen() {\n  return _jsxs(View, {\n    style: {\n      flex: 1,\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    children: [_jsx(Image, {\n      source: require(\"./assets/3dCup.png\"),\n      width: 50,\n      height: 50\n    }), _jsx(Text, {\n      children: \"Roasting Coffee...\"\n    }), _jsx(ActivityIndicator, {\n      size: \"large\"\n    })]\n  });\n}\nexport default function App() {\n  var _React$useState = React.useState(null),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    userToken = _React$useState2[0],\n    setUserToken = _React$useState2[1];\n  var _React$useState3 = React.useState(null),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    userInfo = _React$useState4[0],\n    setUserInfo = _React$useState4[1];\n  var _React$useState5 = React.useState(null),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    userCards = _React$useState6[0],\n    setUserCards = _React$useState6[1];\n  onAuthStateChanged(auth, function (user) {\n    if (user) {\n      console.log(\"onAuthStateChange\");\n      var uid = user.uid;\n      console.log(user);\n      setUserToken(uid);\n      console.log(\"user \" + uid + \" signed in\");\n    } else {\n      console.log(\"no user signed in\");\n      setUserToken(null);\n    }\n  });\n  React.useEffect(function () {\n    onAuthStateChanged(function (user) {\n      user ? setUserToken(user.uid) : setUserToken(null);\n    });\n  }, []);\n  React.useEffect(function () {\n    function fetchFirebaseInfo() {\n      return _fetchFirebaseInfo.apply(this, arguments);\n    }\n    function _fetchFirebaseInfo() {\n      _fetchFirebaseInfo = _asyncToGenerator(function* () {\n        if (userToken !== null) {\n          var userinfo = yield getUserInfo(userToken);\n          setUserInfo(userinfo);\n          var usercards = yield getUserCards();\n          setUserCards(usercards);\n          console.log(\"user info: \" + userInfo);\n          console.log(\"user info: \" + userCards);\n        }\n      });\n      return _fetchFirebaseInfo.apply(this, arguments);\n    }\n    fetchFirebaseInfo();\n  }, [userToken]);\n  if (userInfo === null) {\n    console.log(\"loading\");\n    return _jsx(SplashScreen, {});\n  }\n  return _jsx(NavigationContainer, {\n    children: _jsx(Stack.Navigator, {\n      initialRouteName: \"Login\",\n      children: userToken == null ? _jsxs(_Fragment, {\n        children: [_jsx(Stack.Screen, {\n          name: \"Login\",\n          component: SignInScreen,\n          options: {\n            headerShown: false\n          }\n        }), _jsx(Stack.Screen, {\n          name: \"Register\",\n          component: SignUpScreen,\n          options: {\n            headerShown: false\n          }\n        })]\n      }) : _jsxs(_Fragment, {\n        children: [_jsx(Stack.Screen, {\n          name: \"Home\",\n          component: Home,\n          options: {\n            headerShown: false,\n            animation: \"slide_from_left\"\n          },\n          initialParams: userInfo\n        }), _jsx(Stack.Screen, {\n          name: \"card\",\n          component: CardScreen,\n          options: {\n            headerStyle: {},\n            headerShown: false,\n            animation: \"slide_from_left\"\n          },\n          initialParams: userCards\n        }), _jsx(Stack.Screen, {\n          name: \"stores\",\n          component: StoresScreen,\n          options: {\n            headerShown: false,\n            animation: \"slide_from_left\"\n          }\n        }), _jsx(Stack.Screen, {\n          name: \"settings\",\n          component: SettingsScreen,\n          options: {\n            headerShown: false\n          }\n        }), _jsx(Stack.Screen, {\n          name: \"loyaltyCard\",\n          component: LoyaltyCard,\n          options: {\n            headerShown: false\n          }\n        })]\n      })\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  image: {\n    width: 100,\n    height: 100,\n    borderRadius: 18\n  },\n  icon: {\n    width: 40,\n    height: 40\n  },\n  button: {\n    borderRadius: 50,\n    backgroundColor: \"0\",\n    borderWidth: 2,\n    justifyContent: \"center\",\n    alignSelf: \"center\"\n  }\n});","map":{"version":3,"names":["React","NavigationContainer","useIsFocused","createNativeStackNavigator","app","getAuth","onAuthStateChanged","Home","CardScreen","StoresScreen","SettingsScreen","SignInScreen","SignUpScreen","LoyaltyCard","getUserInfo","getUserCards","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Stack","auth","SplashScreen","View","style","flex","alignItems","justifyContent","children","Image","source","require","width","height","Text","ActivityIndicator","size","App","_React$useState","useState","_React$useState2","_slicedToArray","userToken","setUserToken","_React$useState3","_React$useState4","userInfo","setUserInfo","_React$useState5","_React$useState6","userCards","setUserCards","user","console","log","uid","useEffect","fetchFirebaseInfo","_fetchFirebaseInfo","apply","arguments","_asyncToGenerator","userinfo","usercards","Navigator","initialRouteName","Screen","name","component","options","headerShown","animation","initialParams","headerStyle","styles","StyleSheet","create","image","borderRadius","icon","button","backgroundColor","borderWidth","alignSelf"],"sources":["C:/Users/julia/OneDrive/CoffeeLoyality/FrontEnd User Mobile/App.js"],"sourcesContent":["import { StyleSheet, View, ActivityIndicator, Text, Image } from \"react-native\";\n\nimport * as React from \"react\";\nimport { NavigationContainer, useIsFocused } from \"@react-navigation/native\";\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\nimport { app } from \"./firebase.js\";\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\n//SCREENS\nimport Home from \"./screens/Home\";\nimport CardScreen from \"./screens/Card\";\nimport StoresScreen from \"./screens/Shops\";\nimport SettingsScreen from \"./screens/Settings\";\nimport SignInScreen from \"./screens/SignIn\";\nimport SignUpScreen from \"./screens/SignUp\";\nimport LoyaltyCard from \"./screens/loyaltyCard\";\nimport { getUserInfo, getUserCards } from \"./firebasefunctions\";\n\nconst Stack = createNativeStackNavigator();\nconst auth = getAuth(app);\n\nfunction SplashScreen() {\n  return (\n    <View style={{ flex: 1, alignItems: \"center\", justifyContent: \"center\" }}>\n      <Image source={require(\"./assets/3dCup.png\")} width={50} height={50} />\n      <Text>Roasting Coffee...</Text>\n      <ActivityIndicator size=\"large\" />\n    </View>\n  );\n}\n\nexport default function App() {\n  const [userToken, setUserToken] = React.useState(null);\n  const [userInfo, setUserInfo] = React.useState(null);\n  const [userCards, setUserCards] = React.useState(null);\n  //checks if user is signed in\n\n  onAuthStateChanged(auth, (user) => {\n    if (user) {\n      console.log(\"onAuthStateChange\");\n      const uid = user.uid;\n      console.log(user);\n      setUserToken(uid);\n      console.log(\"user \" + uid + \" signed in\");\n    } else {\n      console.log(\"no user signed in\");\n      setUserToken(null);\n    }\n  });\n  React.useEffect(() => {\n    onAuthStateChanged((user) => {\n      user ? setUserToken(user.uid) : setUserToken(null);\n    });\n  }, []);\n  React.useEffect(() => {\n    async function fetchFirebaseInfo() {\n      if (userToken !== null) {\n        const userinfo = await getUserInfo(userToken);\n        setUserInfo(userinfo);\n        const usercards = await getUserCards();\n        setUserCards(usercards);\n        console.log(\"user info: \" + userInfo);\n        console.log(\"user info: \" + userCards);\n      }\n    }\n    fetchFirebaseInfo();\n  }, [userToken]);\n\n  if (userInfo === null) {\n    // We haven't finished checking for the token yet\n    console.log(\"loading\");\n    return <SplashScreen />;\n  }\n\n  return (\n    <NavigationContainer>\n      <Stack.Navigator initialRouteName=\"Login\">\n        {userToken == null ? (\n          <>\n            <Stack.Screen\n              name=\"Login\"\n              component={SignInScreen}\n              options={{ headerShown: false }}\n            />\n            <Stack.Screen\n              name=\"Register\"\n              component={SignUpScreen}\n              options={{\n                headerShown: false,\n              }}\n            />\n          </>\n        ) : (\n          <>\n            <Stack.Screen\n              name=\"Home\"\n              component={Home}\n              options={{\n                headerShown: false,\n                animation: \"slide_from_left\",\n              }}\n              initialParams={userInfo}\n            />\n            <Stack.Screen\n              name=\"card\"\n              component={CardScreen}\n              options={{\n                headerStyle: {},\n                headerShown: false,\n                animation: \"slide_from_left\",\n              }}\n              initialParams={userCards}\n            />\n            <Stack.Screen\n              name=\"stores\"\n              component={StoresScreen}\n              options={{\n                headerShown: false,\n                animation: \"slide_from_left\",\n              }}\n            />\n            <Stack.Screen\n              name=\"settings\"\n              component={SettingsScreen}\n              options={{\n                headerShown: false,\n              }}\n            />\n            <Stack.Screen\n              name=\"loyaltyCard\"\n              component={LoyaltyCard}\n              options={{\n                headerShown: false,\n              }}\n            />\n          </>\n        )}\n      </Stack.Navigator>\n    </NavigationContainer>\n  );\n}\n\nconst styles = StyleSheet.create({\n  image: {\n    width: 100,\n    height: 100,\n    borderRadius: 18,\n  },\n  icon: {\n    width: 40,\n    height: 40,\n  },\n\n  button: {\n    borderRadius: 50,\n    backgroundColor: \"0\",\n    borderWidth: 2,\n    justifyContent: \"center\",\n    alignSelf: \"center\",\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}